{"ast":null,"code":"export var getFloatVal = function getFloatVal(string) {\n  var floatValue = string.match(/[+-]?\\d+(\\.\\d+)?/g)[0];\n  return null !== floatValue ? parseFloat(parseFloat(floatValue).toFixed(2)) : '';\n};\n/**\n * Add first product.\n *\n * @param {Object} product Product\n * @return {{totalProductsCount: number, totalProductsPrice: any, products: Array}}\n */\n\nexport var addFirstProduct = function addFirstProduct(products) {\n  var productPrice = getFloatVal(products.salePrice);\n  var newCart = {\n    products: [],\n    totalProductsCount: 1,\n    totalProductsPrice: productPrice\n  };\n  var newProduct = createNewProduct(products, productPrice, 1);\n  newCart.products.push(newProduct);\n  localStorage.setItem('keymoji-cart', JSON.stringify(newCart));\n  return newCart;\n};\nexport var createNewProduct = function createNewProduct(products, productPrice, qty) {\n  return {\n    productId: products.productId,\n    image: products.image,\n    name: products.name,\n    price: productPrice,\n    qty: qty,\n    totalPrice: parseFloat((productPrice * qty).toFixed(2))\n  };\n};\nexport var updateCart = function updateCart(existingCart, products, qtyToBeAdded) {\n  var newQty = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var updatedProducts = getUpdatedProducts(existingCart.products, products, qtyToBeAdded, newQty);\n\n  var addPrice = function addPrice(total, item) {\n    total.totalPrice += item.totalPrice;\n    total.qty += item.qty;\n    return total;\n  };\n\n  var total = updatedProducts.reduce(addPrice, {\n    totalPrice: 0,\n    qty: 0\n  });\n  var updatedCart = {\n    products: updatedProducts,\n    totalProductsCount: parseInt(total.qty),\n    totalProductsPrice: parseFloat(total.totalPrice)\n  };\n  console.warn('updatedCart', updatedCart);\n  localStorage.setItem('keymoji-cart', JSON.stringify(updatedCart));\n  return updatedCart;\n};\nexport var getUpdatedProducts = function getUpdatedProducts(existingProductsInCart, products, qtyToBeAdded) {\n  var newQty = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var productsExistsIndex = isProductInCart(existingProductsInCart, products.productId);\n\n  if (-1 < productsExistsIndex) {\n    var updatedProducts = existingProductsInCart;\n    var updatedProduct = updatedProducts[productsExistsIndex];\n    updatedProduct.qty = newQty ? parseInt(newQty) : parseInt(updatedProduct.qty + qtyToBeAdded);\n    updatedProduct.totalPrice = parseFloat(updatedProduct.price * updatedProduct.qty).toFixed(2);\n    return updatedProducts;\n  } else {\n    var productPrice = getFloatVal(products.salePrice);\n    var newProduct = createNewProduct(products, productPrice, qtyToBeAdded);\n    existingProductsInCart.push(newProduct);\n    return existingProductsInCart;\n  }\n};\nexport var isProductInCart = function isProductInCart(existingProductsInCart, productId) {\n  var returnItemThatExits = function returnItemThatExits(item, index) {\n    if (productId === DataTransferItem.productId) {\n      return item;\n    }\n  };\n\n  var newArray = existingProductsInCart.filter(returnItemThatExits);\n  return existingProductsInCart.indexOf(newArray[0]);\n};","map":{"version":3,"sources":["C:/Users/ajith/Desktop/keymoji/functions.js"],"names":["getFloatVal","string","floatValue","match","parseFloat","toFixed","addFirstProduct","products","productPrice","salePrice","newCart","totalProductsCount","totalProductsPrice","newProduct","createNewProduct","push","localStorage","setItem","JSON","stringify","qty","productId","image","name","price","totalPrice","updateCart","existingCart","qtyToBeAdded","newQty","updatedProducts","getUpdatedProducts","addPrice","total","item","reduce","updatedCart","parseInt","console","warn","existingProductsInCart","productsExistsIndex","isProductInCart","updatedProduct","returnItemThatExits","index","DataTransferItem","newArray","filter","indexOf"],"mappings":"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","sourcesContent":["export const getFloatVal = ( string ) => {\n\n\tlet floatValue = string.match( /[+-]?\\d+(\\.\\d+)?/g )[0];\n\treturn ( null !== floatValue ) ? parseFloat( parseFloat( floatValue ).toFixed( 2 ) ) : '';\n\n};\n\n/**\n * Add first product.\n *\n * @param {Object} product Product\n * @return {{totalProductsCount: number, totalProductsPrice: any, products: Array}}\n */\nexport const addFirstProduct = ( products ) => {\n\n\tlet productPrice = getFloatVal( products.salePrice );\n\n\tlet newCart = {\n\t\tproducts: [],\n\t\ttotalProductsCount: 1,\n\t\ttotalProductsPrice: productPrice\n\t};\n\n\tconst newProduct = createNewProduct( products, productPrice, 1 );\n\tnewCart.products.push( newProduct );\n\n\tlocalStorage.setItem( 'keymoji-cart', JSON.stringify( newCart ) );\n\n\treturn newCart;\n};\n\nexport const createNewProduct = ( products, productPrice, qty ) => {\n\n\treturn  {\n\t\tproductId: products.productId,\n\t\timage: products.image,\n\t\tname: products.name,\n\t\tprice: productPrice,\n\t\tqty,\n\t\ttotalPrice: parseFloat( ( productPrice * qty ).toFixed( 2 ) )\n\t};\n\n};\n\nexport const updateCart = ( existingCart, products, qtyToBeAdded, newQty = false  ) => {\n\n\tconst updatedProducts = getUpdatedProducts( existingCart.products , products, qtyToBeAdded, newQty );\n\tconst addPrice=(total,item)=>{\n\t\ttotal.totalPrice+=item.totalPrice;\n\t\ttotal.qty+=item.qty;\n\t\treturn total;\n\t}\n\tlet total= updatedProducts.reduce(addPrice,{totalPrice:0,qty:0});\n\tconst updatedCart = {\n\t\tproducts:updatedProducts,\n\t\ttotalProductsCount:parseInt(total.qty),\n\t\ttotalProductsPrice:parseFloat(total.totalPrice)\n\t};\n\tconsole.warn('updatedCart',updatedCart)\n\tlocalStorage.setItem('keymoji-cart',JSON.stringify(updatedCart));\n\treturn updatedCart;\n};\n\nexport const getUpdatedProducts = (existingProductsInCart,products,qtyToBeAdded,newQty=false)=>{\n\tconst productsExistsIndex = isProductInCart(existingProductsInCart,products.productId);\n\tif(-1< productsExistsIndex){\n\t\tlet updatedProducts = existingProductsInCart;\n\t\tlet updatedProduct = updatedProducts[productsExistsIndex];\n\t\tupdatedProduct.qty = (newQty)?parseInt(newQty):parseInt(updatedProduct.qty+qtyToBeAdded);\n\t\tupdatedProduct.totalPrice = parseFloat(updatedProduct.price * updatedProduct.qty).toFixed(2);\n\t\treturn updatedProducts;\n\t}else{\n\t\tlet productPrice = getFloatVal(products.salePrice);\n\t\tconst newProduct = createNewProduct(products,productPrice,qtyToBeAdded);\n\t\texistingProductsInCart.push(newProduct);\n\t\treturn existingProductsInCart;\n\t}\n};\nexport const isProductInCart = (existingProductsInCart,productId)=>{\n\tconst returnItemThatExits = (item,index)=>{\n\tif (productId === DataTransferItem.productId){\n\t\treturn item;\n\t}\n};\nconst newArray = existingProductsInCart.filter(returnItemThatExits);\nreturn existingProductsInCart.indexOf(newArray[0]);\n};\n"]},"metadata":{},"sourceType":"module"}