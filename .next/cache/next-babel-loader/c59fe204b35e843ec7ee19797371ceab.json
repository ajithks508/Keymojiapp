{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Layout from \"../components/catbyproduct/Layout\";\nimport { withRouter } from 'next/router';\nimport client from \"../components/ApolloClient\";\nimport PRODUCTS_LIST from \"../queries/productlist\";\nimport Productlistbycat from \"../components/catbyproduct/Productlistbycat\";\nvar listproduct = withRouter(function (props) {\n  var categoryName = props.categoryName,\n      products = props.products;\n  return /*#__PURE__*/_jsx(Layout, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"content-wrap\",\n      children: [categoryName ? /*#__PURE__*/_jsx(\"h3\", {\n        className: \"product-container pl-5\",\n        children: categoryName\n      }) : '', /*#__PURE__*/_jsx(\"div\", {\n        className: \"product-container\",\n        children: undefined !== products && products.length ? products.map(function (lst) {\n          return /*#__PURE__*/_jsx(Productlistbycat, {\n            lst: lst\n          }, lst.id);\n        }) : ' '\n      })]\n    })\n  });\n});\n\nlistproduct.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(context) {\n    var slug, id, res;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            slug = context.query.slug;\n            id = slug ? slug.split('-').pop() : context.query.id;\n            _context.next = 4;\n            return client.query({\n              query: PRODUCTS_LIST,\n              variables: {\n                id: id\n              }\n            });\n\n          case 4:\n            res = _context.sent;\n            return _context.abrupt(\"return\", {\n              categoryName: res.data.productCategory.name,\n              products: res.data.productCategory.products.nodes\n            });\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default listproduct;","map":null,"metadata":{},"sourceType":"module"}