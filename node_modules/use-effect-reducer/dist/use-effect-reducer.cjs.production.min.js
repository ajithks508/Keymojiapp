"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e=require("react");function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function r(e){var n,r={type:e.type,status:t.Idle,start:function(u,o){e.exec&&(n=e.exec(u,e,o)),r.status=t.Started},stop:function(){n&&"function"==typeof n&&n(),r.status=t.Stopped}};return r}!function(t){t[t.Idle=0]="Idle",t[t.Started=1]="Started",t[t.Stopped=2]="Stopped"}(t||(t={}));var u=Symbol(),o=function(t,e){var r="function"==typeof t?t.name:t.type;return n({},"function"==typeof t?{}:t,{type:r,exec:(e?e[r]:void 0)||("function"==typeof t?t:t.exec)})};exports.toEffect=function(t){return{type:t.name,exec:t}},exports.useEffectReducer=function(n,c,f){var a=e.useRef(new Set),i=e.useMemo((function(){if("function"==typeof c){var t=[],e=c((function(e){var n=r(o(e,f));return t.push(n),n}));return[e,[[e,t]],[]]}return[c,[],[]]}),[]),s=e.useReducer((function(t,e){var c=t[0],a=t[1],i=t[2],s=[],p=[];if(e.type===u)return[c,a.slice(e.count),p];var l=function(t){var e=r(o(t,f));return s.push(e),e};l.stop=function(t){p.push(t)},l.replace=function(t,e){return t&&p.push(t),l(e)};var d=n(c,e,l);return[d,s.length?[].concat(a,[[d,s]]):a,i.length?[].concat(i,p):p]}),i),p=s[0],l=p[0],d=p[1],y=p[2],v=s[1],h=e.useCallback((function(t){v(function(t){return"string"==typeof t?{type:t}:t}(t))}),[]);return e.useEffect((function(){y.length&&y.forEach((function(t){t.stop(),a.current.delete(t)}))}),[y]),e.useEffect((function(){d.length&&(d.forEach((function(e){var n=e[0];e[1].forEach((function(e){e.status===t.Idle&&(a.current.add(e),e.start(n,v))}))})),v({type:u,count:d.length}))}),[d]),e.useEffect((function(){return function(){a.current.forEach((function(e){e.status===t.Started&&e.stop()}))}}),[]),[l,h]};
//# sourceMappingURL=use-effect-reducer.cjs.production.min.js.map
