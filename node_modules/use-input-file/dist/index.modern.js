import{useState as t,useRef as e,useEffect as r}from"react";export default function(n={}){const[c,i]=t(null),o=e(null),u=e(void 0),s=n.ref||o;return u.current=n.onChange,r(()=>{const t=s.current;if(t&&n.options){const{options:e}=n;e.accept&&t.setAttribute("accept",e.accept),e.multiple&&t.setAttribute("multiple","multiple")}},[s,n]),r(()=>{const t=s.current;if(t){const e=t=>{const e=Array.from(t.currentTarget.files);i(e)},r=t=>u.current?u.current(t):e(t);return t.setAttribute("type","file"),t.addEventListener("change",r,!1),()=>{t.removeEventListener("change",r,!1)}}},[s]),{ref:s,files:c}}
